<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Dataset Ingest and Plotting | Introduction to R</title>
  <meta name="description" content="Tutorials for the PubForge Tech Trainings Introduction to R Course" />
  <meta name="generator" content="bookdown 0.20.6 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Dataset Ingest and Plotting | Introduction to R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Tutorials for the PubForge Tech Trainings Introduction to R Course" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Dataset Ingest and Plotting | Introduction to R" />
  
  <meta name="twitter:description" content="Tutorials for the PubForge Tech Trainings Introduction to R Course" />
  

<meta name="author" content="James Simkins" />


<meta name="date" content="2020-12-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="dataframes-indexing-and-for-loops.html"/>
<link rel="next" href="final-project-world-cup-data.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Tech Trainings: Introduction to R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>1</b> Introduction To R</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#agenda"><i class="fa fa-check"></i><b>1.1</b> Agenda</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html"><i class="fa fa-check"></i><b>2</b> Getting Started with R</a><ul>
<li class="chapter" data-level="2.1" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#why-is-r-so-popular"><i class="fa fa-check"></i><b>2.1</b> Why is R so popular?</a></li>
<li class="chapter" data-level="2.2" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#installing-r"><i class="fa fa-check"></i><b>2.2</b> Installing R</a></li>
<li class="chapter" data-level="2.3" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#installing-rstudio"><i class="fa fa-check"></i><b>2.3</b> Installing Rstudio</a></li>
<li class="chapter" data-level="2.4" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#video-examples"><i class="fa fa-check"></i><b>2.4</b> Video Examples</a></li>
<li class="chapter" data-level="2.5" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#getting-familiar-with-rstudio"><i class="fa fa-check"></i><b>2.5</b> Getting familiar with RStudio</a></li>
<li class="chapter" data-level="2.6" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#open-rstudio"><i class="fa fa-check"></i><b>2.6</b> Open RStudio</a></li>
<li class="chapter" data-level="2.7" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#r-studio-layout"><i class="fa fa-check"></i><b>2.7</b> R Studio Layout</a></li>
<li class="chapter" data-level="2.8" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#writing-a-script-in-r"><i class="fa fa-check"></i><b>2.8</b> Writing a script in R</a><ul>
<li class="chapter" data-level="2.8.1" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#input-evaluation"><i class="fa fa-check"></i><b>2.8.1</b> Input &amp; Evaluation</a></li>
<li class="chapter" data-level="2.8.2" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#running-code"><i class="fa fa-check"></i><b>2.8.2</b> Running Code</a></li>
<li class="chapter" data-level="2.8.3" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#errors"><i class="fa fa-check"></i><b>2.8.3</b> Errors</a></li>
<li class="chapter" data-level="2.8.4" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#objects-variables"><i class="fa fa-check"></i><b>2.8.4</b> Objects &amp; Variables</a></li>
<li class="chapter" data-level="2.8.5" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#variable-names"><i class="fa fa-check"></i><b>2.8.5</b> Variable Names</a></li>
<li class="chapter" data-level="2.8.6" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#commenting-note-taking"><i class="fa fa-check"></i><b>2.8.6</b> Commenting &amp; Note Taking</a></li>
<li class="chapter" data-level="2.8.7" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#saving-this-r-script"><i class="fa fa-check"></i><b>2.8.7</b> Saving this R script</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="functions-classes.html"><a href="functions-classes.html"><i class="fa fa-check"></i><b>3</b> Functions &amp; Classes</a><ul>
<li class="chapter" data-level="3.1" data-path="functions-classes.html"><a href="functions-classes.html#packages-and-functions"><i class="fa fa-check"></i><b>3.1</b> Packages and Functions</a></li>
<li class="chapter" data-level="3.2" data-path="functions-classes.html"><a href="functions-classes.html#arguments"><i class="fa fa-check"></i><b>3.2</b> Arguments</a></li>
<li class="chapter" data-level="3.3" data-path="functions-classes.html"><a href="functions-classes.html#r-objects"><i class="fa fa-check"></i><b>3.3</b> R Objects</a><ul>
<li class="chapter" data-level="3.3.1" data-path="functions-classes.html"><a href="functions-classes.html#characters"><i class="fa fa-check"></i><b>3.3.1</b> Characters</a></li>
<li class="chapter" data-level="3.3.2" data-path="functions-classes.html"><a href="functions-classes.html#numeric"><i class="fa fa-check"></i><b>3.3.2</b> Numeric</a></li>
<li class="chapter" data-level="3.3.3" data-path="functions-classes.html"><a href="functions-classes.html#integers"><i class="fa fa-check"></i><b>3.3.3</b> Integers</a></li>
<li class="chapter" data-level="3.3.4" data-path="functions-classes.html"><a href="functions-classes.html#logicals"><i class="fa fa-check"></i><b>3.3.4</b> Logicals</a></li>
<li class="chapter" data-level="3.3.5" data-path="functions-classes.html"><a href="functions-classes.html#complex-values"><i class="fa fa-check"></i><b>3.3.5</b> Complex values</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="functions-classes.html"><a href="functions-classes.html#lists"><i class="fa fa-check"></i><b>3.4</b> Lists</a></li>
<li class="chapter" data-level="3.5" data-path="functions-classes.html"><a href="functions-classes.html#factors"><i class="fa fa-check"></i><b>3.5</b> Factors</a></li>
<li class="chapter" data-level="3.6" data-path="functions-classes.html"><a href="functions-classes.html#matrices"><i class="fa fa-check"></i><b>3.6</b> Matrices</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dataframes-indexing-and-for-loops.html"><a href="dataframes-indexing-and-for-loops.html"><i class="fa fa-check"></i><b>4</b> DataFrames, Indexing, and For Loops</a><ul>
<li class="chapter" data-level="4.1" data-path="dataframes-indexing-and-for-loops.html"><a href="dataframes-indexing-and-for-loops.html#data-frames"><i class="fa fa-check"></i><b>4.1</b> Data Frames</a></li>
<li class="chapter" data-level="4.2" data-path="dataframes-indexing-and-for-loops.html"><a href="dataframes-indexing-and-for-loops.html#indexing-data-frames"><i class="fa fa-check"></i><b>4.2</b> Indexing Data Frames</a></li>
<li class="chapter" data-level="4.3" data-path="dataframes-indexing-and-for-loops.html"><a href="dataframes-indexing-and-for-loops.html#for-loops"><i class="fa fa-check"></i><b>4.3</b> For Loops</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dataset-ingest-and-plotting.html"><a href="dataset-ingest-and-plotting.html"><i class="fa fa-check"></i><b>5</b> Dataset Ingest and Plotting</a><ul>
<li class="chapter" data-level="5.1" data-path="dataset-ingest-and-plotting.html"><a href="dataset-ingest-and-plotting.html#installing-a-package"><i class="fa fa-check"></i><b>5.1</b> Installing a Package</a></li>
<li class="chapter" data-level="5.2" data-path="dataset-ingest-and-plotting.html"><a href="dataset-ingest-and-plotting.html#reading-data"><i class="fa fa-check"></i><b>5.2</b> Reading Data</a></li>
<li class="chapter" data-level="5.3" data-path="dataset-ingest-and-plotting.html"><a href="dataset-ingest-and-plotting.html#paths"><i class="fa fa-check"></i><b>5.3</b> Paths</a><ul>
<li class="chapter" data-level="5.3.1" data-path="dataset-ingest-and-plotting.html"><a href="dataset-ingest-and-plotting.html#path-navigation-trick"><i class="fa fa-check"></i><b>5.3.1</b> Path Navigation Trick</a></li>
<li class="chapter" data-level="5.3.2" data-path="dataset-ingest-and-plotting.html"><a href="dataset-ingest-and-plotting.html#reading-in-the-file"><i class="fa fa-check"></i><b>5.3.2</b> Reading in the File</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="dataset-ingest-and-plotting.html"><a href="dataset-ingest-and-plotting.html#plotting-the-data"><i class="fa fa-check"></i><b>5.4</b> Plotting the Data</a><ul>
<li class="chapter" data-level="5.4.1" data-path="dataset-ingest-and-plotting.html"><a href="dataset-ingest-and-plotting.html#base-plotting"><i class="fa fa-check"></i><b>5.4.1</b> Base Plotting</a></li>
<li class="chapter" data-level="5.4.2" data-path="dataset-ingest-and-plotting.html"><a href="dataset-ingest-and-plotting.html#histograms"><i class="fa fa-check"></i><b>5.4.2</b> Histograms</a></li>
<li class="chapter" data-level="5.4.3" data-path="dataset-ingest-and-plotting.html"><a href="dataset-ingest-and-plotting.html#pie-chart"><i class="fa fa-check"></i><b>5.4.3</b> Pie Chart</a></li>
<li class="chapter" data-level="5.4.4" data-path="dataset-ingest-and-plotting.html"><a href="dataset-ingest-and-plotting.html#scatter-plot"><i class="fa fa-check"></i><b>5.4.4</b> Scatter Plot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="final-project-world-cup-data.html"><a href="final-project-world-cup-data.html"><i class="fa fa-check"></i><b>6</b> Final Project: World Cup Data</a><ul>
<li class="chapter" data-level="6.1" data-path="final-project-world-cup-data.html"><a href="final-project-world-cup-data.html#about-the-data"><i class="fa fa-check"></i><b>6.1</b> About the Data</a></li>
<li class="chapter" data-level="6.2" data-path="final-project-world-cup-data.html"><a href="final-project-world-cup-data.html#assessment"><i class="fa fa-check"></i><b>6.2</b> Assessment</a><ul>
<li class="chapter" data-level="6.2.1" data-path="final-project-world-cup-data.html"><a href="final-project-world-cup-data.html#coding-tasks"><i class="fa fa-check"></i><b>6.2.1</b> Coding Tasks</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">James Simkins</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dataset-ingest-and-plotting" class="section level1">
<h1><span class="header-section-number">5</span> Dataset Ingest and Plotting</h1>
<p><br>
<br>
<img src="images/input.jpeg" width="70%" style="display: block; margin: auto;" />
<br>
<br>
Reading data into R is a regular practice. R can ingest almost any type of file including CSV, Excel, Binary, XML, JSON, and many more. Today, we’re going to read in a Microsoft Excel file into R. This file contains data on best-selling books from Amazon between 2009 and 2019. Before we begin, we will need to download the <code>amazon_bestsellers.xlxs</code> file from the course datasets folder.</p>
<div id="installing-a-package" class="section level2">
<h2><span class="header-section-number">5.1</span> Installing a Package</h2>
<p>So far, we’ve only been using functions that are part of the <code>base</code> package and are automatically loaded into each session by RStudio. There are over 10,000 R packages available for download from R’s package repository. All of these packages are free and contain pre-written functions for just about any computing purpose. Today, we’re going to use the <code>readxl</code> package. This package helps us read Microsoft Excel files in R. Let’s load in this package.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" data-line-number="1"><span class="kw">library</span>(readxl)</a></code></pre></div>
<p><code>Error in library(readxl) : there is no package called ‘readxl’</code>. This package is not currently installed. We can install the function now using the <code>install.packages()</code> function from the pre-loaded <code>base</code> package.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb125-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;readxl&quot;</span>)</a></code></pre></div>
<p>You may need to select a <strong>CRAN Mirror</strong> before installing. CRAN stands for Comprehensive R Archive Network and it is a repository for R packages that is a replica of the primary R package database. You can select any of these mirrors, but it is recommended that you choose a mirror located in the United States if RStudio asks you to choose one.</p>
<p><strong>Only use the</strong> <code>install.packages()</code> <strong>function in the console</strong>. Why? We only need to install a package once. After the package is installed, we will need to <em>load the package into each R session</em> but we will not need to install it again.</p>
<p>After <code>readxl</code> is installed correctly, you’ll see a message that looks like this;</p>
<p><code>The downloaded binary packages are in /var/folders/6m/1b7gn_m93g9380p1jxvm2_700000gr/T//Rtmpcuw03I/downloaded_packages</code></p>
<p>This is the location on your computer where the package and all it’s functions are stored. We don’t need to worry about the location as R handles this information for us. We also don’t need to worry about packages taking up significant space on our hard drives. R packages are small in size. Now that <code>readxl</code> is installed, we can load it in via the <code>library()</code> function like we did above. This time, however, it should load in without any errors.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb126-1" data-line-number="1"><span class="kw">library</span>(readxl)</a></code></pre></div>
<p>Wonderful, now we can use functions from the <code>readxl</code> package. What happens if we try and use a function from <code>readxl</code> without first loading the package? R will not understand what you mean and return an error. We must always load in package with each R session and <strong>before</strong> we use a function in a script. This is why we load in packages that we need at the top of every R script - so they’re run first.</p>
</div>
<div id="reading-data" class="section level2">
<h2><span class="header-section-number">5.2</span> Reading Data</h2>
<p>We’re ready to use the <code>readxl</code> package. What function can we use from this package to load in our dataset? Remember the <code>help()</code> function where we can find our more information on functions? We can use <code>??readxl</code> in the R console to find out more information on functions within this package.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb127-1" data-line-number="1">??readxl</a></code></pre></div>
<p>The <code>??</code> function runs a search on every function/package we have in R and looks for functions/packages containing <code>readxl</code>. Look for examples that begin with <code>readxl::</code>. This notation is used to inform us of packages and functions, i.e. <code>package::function</code>. Technically speaking, we <em>don’t have to</em> load in a package if we use this notation…but it’s a lot easier to just load in the package than to code every function as <code>package::function</code>. The notation of <code>package::function</code> is primarily used by certain software developers. For our purposes, loading in a package at the top of the script is perfectly acceptable and recommended. Remember, our goal is just to tell R where to find a function so we can use it.</p>
<p>Now that we have searched, we can see a line that reads as: <code>readxl::read_excel   Read xls and xlsx files</code>. We will use this function, <code>read_excel</code>, to read our <code>amazon_bestsellers.xlxs</code>. What arguments does the <code>read_excel</code>function take? We can use our <code>help()</code> function to find out.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb128-1" data-line-number="1"><span class="kw">help</span>(read_excel)</a></code></pre></div>
<p>A shortcut for the <code>help</code> function is a single <code>?</code> and is used like so…</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb129-1" data-line-number="1">?read_excel</a></code></pre></div>
<p>There are many arguments we can tinker with here if we needed to, but we only need to be concerned with the <code>path</code> argument that defines the “Path to the xls/xlsx file”.</p>
</div>
<div id="paths" class="section level2">
<h2><span class="header-section-number">5.3</span> Paths</h2>
<p>A path is a series of folder names that directs the computer to the location of a file. For example, if we download a file called <code>amazon_bestsellers.xlsx</code>, it is likely residing in our downloads folder. Our job is to find the path to that file. It <em>might</em> look like <code>/Users/your_name/Downloads/amazon_bestsellers.xlsx</code> on Mac or <code>C:\your_name\Downloads\amazon_bestsellers.xlsx</code>, but is there a way to check for it exactly? Let’s introduce the <code>getwd()</code>, or get working directory, function.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" data-line-number="1"><span class="kw">getwd</span>()</a></code></pre></div>
<p>My current directory (aka path) is <code>/Users/james</code>. This is where the “Home” direcoty is located in the files pane of our bottom right hand quadrant. Thus, in order for me to navigate to the Downloads folder, I simply need to type <code>&quot;Downloads/amazon_bestsellers.xlsx&quot;</code>. Additionally, if I wanted to, I could <em>change</em> the current path of the working directory with the <code>setwd()</code> function (aka set working directory).</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb131-1" data-line-number="1"><span class="kw">setwd</span>(<span class="st">&quot;Downloads&quot;</span>)</a></code></pre></div>
<p>Now, if I use <code>getwd()</code> again…</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" data-line-number="1"><span class="kw">getwd</span>()</a></code></pre></div>
<p>I find that my new working directory is <code>/Users/james/Downloads</code>. Thus, my full path to the <code>amazon_bestsellers.xlsx</code> file is <code>/Users/james/Downloads/amazon_bestsellers.xls</code>.</p>
<div id="path-navigation-trick" class="section level3">
<h3><span class="header-section-number">5.3.1</span> Path Navigation Trick</h3>
<p>The <code>tab</code> key on our keyboard is a shortcut key for autocompletion. We can hit the <code>tab</code> key within a set of quotes <code>&quot;&quot;</code> and a visualization of the files and folders of the current working directory will appear. From this point, we can actually click our way to a file and R Studio will automatically fill out the file path to the file for us. This keyboard shortcut can also be used to autocomplete functions, variables/objects, and packages. For example, if I have one really long variable name…</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb133-1" data-line-number="1">onereaaaaaaalllllllyyyyylonnnngggggggvarrriabbblleeeeennnnaaammmeee =<span class="st"> &quot;use tab for a shortcut to this&quot;</span></a></code></pre></div>
<p>I can start typing the first few letters or so and click the <code>tab</code> key for an autocomplete menu to appear. If the top result is indeed what we want, we can hit the <code>tab</code> key <em>again</em> and the full name of the variable will autocomplete for us. This <em>can also be used</em> to list argument names within a function. The <code>tab</code> key is a great tool and can save us time and headache from mistyping paths or names.</p>
</div>
<div id="reading-in-the-file" class="section level3">
<h3><span class="header-section-number">5.3.2</span> Reading in the File</h3>
<p>Now that we have the path, we can finally use our <code>read_excel</code> function.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" data-line-number="1"><span class="co"># open our amazon bestsellers file using read_excel from the readxl package</span></a>
<a class="sourceLine" id="cb134-2" data-line-number="2">amzn =<span class="st"> </span><span class="kw">read_excel</span>(<span class="dt">path =</span> <span class="st">&quot;/Users/james/Downloads/amazon_bestsellers.xlsx&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb135-1" data-line-number="1"><span class="kw">class</span>(amzn)</a></code></pre></div>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<p>We read in our file succesfully but it was read in as a tibble dataframe by the <code>read_excel</code> function. This is a more advanced form of a dataframe that goes beyond the scope of this course. Let’s convert it to just a standard data frame using our <code>data.frame()</code> function.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" data-line-number="1"><span class="co"># overwrite our amzn tibble dataframe and convert it to a standard dataframe </span></a>
<a class="sourceLine" id="cb137-2" data-line-number="2">amzn =<span class="st"> </span><span class="kw">data.frame</span>(amzn)</a>
<a class="sourceLine" id="cb137-3" data-line-number="3"><span class="kw">class</span>(amzn)</a></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>Much better. Now let’s print out the first few rows of the <code>amzn</code> dataframe using the <code>head()</code> function to get a feel for the dataset…</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb139-1" data-line-number="1"><span class="kw">head</span>(amzn)</a></code></pre></div>
<pre><code>##                                                                 Name
## 1                                      10-Day Green Smoothie Cleanse
## 2                                                  11/22/63: A Novel
## 3                            12 Rules for Life: An Antidote to Chaos
## 4                                             1984 (Signet Classics)
## 5 5,000 Awesome Facts (About Everything!) (National Geographic Kids)
## 6                      A Dance with Dragons (A Song of Ice and Fire)
##                     Author User.Rating Reviews Price Year       Genre
## 1                 JJ Smith         4.7   17350     8 2016 Non Fiction
## 2             Stephen King         4.6    2052    22 2011     Fiction
## 3       Jordan B. Peterson         4.7   18979    15 2018 Non Fiction
## 4            George Orwell         4.7   21424     6 2017     Fiction
## 5 National Geographic Kids         4.8    7665    12 2019 Non Fiction
## 6      George R. R. Martin         4.4   12643    11 2011     Fiction</code></pre>
<p>Here is a description of what this file contains.</p>
<table>
<thead>
<tr class="header">
<th>Variable Name</th>
<th>Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Name</td>
<td>Book Title</td>
</tr>
<tr class="even">
<td>Author</td>
<td>Author of the Book</td>
</tr>
<tr class="odd">
<td>User Rating</td>
<td>Amazon book rating as of 10/13/2020</td>
</tr>
<tr class="even">
<td>Reviews</td>
<td>Total number of book reviews</td>
</tr>
<tr class="odd">
<td>Price</td>
<td>Book price as of 10/13/2020</td>
</tr>
<tr class="even">
<td>Year</td>
<td>Year it was in the top 50 bestsellers on Amazon</td>
</tr>
<tr class="odd">
<td>Genre</td>
<td>Book Genre</td>
</tr>
</tbody>
</table>
<p>We can actually sort the data by any of the variables we want using the <code>order()</code> function. Let’s order the dataframe based on the User Rating.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb141-1" data-line-number="1"><span class="kw">order</span>(amzn<span class="op">$</span>User Rating, <span class="dt">decreasing=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<p><code>Error: unexpected symbol in &quot;order(amzn$User Rating&quot;</code>. This is an example of how spaces are bad. R is unable to get around the space between User and Rating in thr variable name. Thus, we will need to rename this variable name to get rid of this.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" data-line-number="1"><span class="co"># use indexing to configure which column User Rating is. We know it is the 3rd column</span></a>
<a class="sourceLine" id="cb142-2" data-line-number="2">amzn[,<span class="dv">3</span>]</a></code></pre></div>
<pre><code>##   [1] 4.7 4.6 4.7 4.7 4.8 4.4 4.7 4.7 4.7 4.6 4.6 4.6 4.6 4.5 4.6 4.5 4.6 4.4
##  [19] 4.5 4.8 4.6 4.6 3.9 4.6 4.3 4.6 4.7 4.2 4.6 4.6 4.8 4.7 4.8 4.8 4.8 4.7
##  [37] 4.7 4.7 4.6 4.5 4.9 4.9 4.8 4.6 4.8 4.5 4.7 4.7 4.7 4.7 4.7 4.7 4.7 4.3
##  [55] 4.8 4.8 4.6 4.6 4.8 4.4 4.6 4.3 4.2 4.8 4.8 4.8 4.8 4.6 4.6 4.5 4.5 4.8
##  [73] 4.8 4.8 4.6 4.6 4.6 4.5 4.6 4.7 4.8 4.9 4.9 4.9 4.9 4.9 4.9 4.9 4.8 4.6
##  [91] 4.5 4.5 4.3 4.5 4.5 4.7 4.7 4.7 4.7 4.7 4.6 4.6 4.7 4.4 4.4 4.5 3.8 3.8
## [109] 4.5 4.2 4.7 4.7 4.7 4.7 4.7 4.4 4.7 4.4 4.6 4.6 4.6 4.5 4.6 4.8 4.8 4.8
## [127] 4.8 4.8 4.6 4.6 4.6 4.6 3.6 4.8 4.6 4.0 4.0 4.0 4.6 4.5 4.5 4.5 4.5 4.8
## [145] 4.8 4.8 4.9 4.9 4.6 4.4 4.8 4.9 4.8 4.9 4.0 4.9 4.9 4.9 4.7 4.8 4.8 4.7
## [163] 4.7 4.4 4.4 4.8 4.7 4.7 4.7 4.7 4.7 4.3 4.8 4.8 4.9 4.7 4.8 4.6 4.8 4.8
## [181] 4.3 4.4 4.1 4.6 4.4 4.4 4.8 4.9 4.9 4.9 4.9 4.9 4.9 4.6 4.5 4.6 4.5 4.6
## [199] 4.7 4.7 4.6 4.6 4.8 4.8 4.5 4.5 4.5 4.9 4.6 4.6 4.6 4.6 4.6 4.5 4.5 4.4
## [217] 4.8 4.5 4.1 4.9 4.5 4.5 4.2 4.8 4.8 4.8 4.5 4.7 4.8 4.7 4.7 4.7 4.4 4.6
## [235] 4.6 4.6 4.5 4.5 4.5 4.8 4.8 4.6 4.7 4.6 4.9 4.9 4.9 4.9 4.9 4.9 4.9 4.9
## [253] 4.9 4.8 4.2 4.6 4.6 4.5 4.3 4.6 4.6 4.6 4.7 4.7 4.8 4.8 4.8 4.8 4.7 4.3
## [271] 4.3 4.5 4.5 4.5 4.5 4.5 4.5 4.5 4.5 4.5 4.5 4.8 4.6 4.6 4.7 4.7 4.6 4.6
## [289] 4.9 4.9 4.8 4.8 4.6 4.8 4.8 4.7 4.7 4.8 4.1 4.7 4.6 4.6 4.6 4.9 4.0 4.0
## [307] 4.0 4.0 4.0 4.0 4.0 4.0 4.0 4.5 4.6 4.5 4.4 4.4 4.3 4.3 4.7 4.7 4.7 4.7
## [325] 4.7 4.8 4.8 4.8 4.8 4.8 4.8 4.6 4.6 4.6 4.6 4.7 4.7 4.7 4.7 4.6 4.7 4.7
## [343] 4.7 4.8 4.2 4.8 4.7 4.6 4.6 4.8 4.8 4.8 4.8 3.3 4.7 4.3 4.3 4.3 4.8 4.4
## [361] 4.8 4.8 4.8 4.1 4.0 4.7 4.7 4.7 4.7 4.6 4.6 4.6 4.6 4.6 4.6 4.7 4.7 4.7
## [379] 4.7 4.7 4.7 4.8 4.1 4.1 4.7 4.7 4.7 4.7 4.4 4.4 4.8 4.8 3.9 3.9 4.4 4.4
## [397] 4.4 4.5 4.7 4.3 4.6 4.8 4.8 4.8 4.8 4.8 4.8 4.7 4.7 4.7 4.8 4.8 4.7 4.7
## [415] 4.7 4.3 4.3 4.7 4.8 4.8 4.9 4.4 4.4 4.5 4.5 4.5 4.5 4.4 4.8 4.2 4.8 4.9
## [433] 4.8 4.7 4.5 4.8 4.6 4.8 4.8 4.4 4.4 4.4 4.4 4.4 4.3 4.3 4.8 4.8 4.8 4.5
## [451] 4.4 4.8 4.8 4.6 4.3 4.3 4.6 4.6 4.8 4.6 4.6 4.6 4.5 4.8 4.6 4.6 4.6 4.7
## [469] 4.7 4.7 4.4 4.4 4.7 4.7 4.8 4.7 4.9 4.9 4.9 4.9 4.9 4.9 4.9 4.6 4.6 4.6
## [487] 4.9 4.9 4.9 4.9 4.8 4.8 4.7 4.7 4.6 4.6 4.5 4.5 4.3 4.3 4.6 4.6 4.6 4.6
## [505] 4.3 4.8 4.8 4.8 4.8 4.8 4.6 4.8 4.5 4.7 4.5 4.8 4.8 4.8 4.8 4.8 4.3 4.9
## [523] 4.8 4.7 4.8 4.5 4.6 4.7 4.7 4.8 4.4 4.4 4.4 4.8 4.8 4.8 4.6 4.4 4.5 4.2
## [541] 4.8 4.8 4.8 4.8 4.8 4.9 4.7 4.7 4.7 4.7</code></pre>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" data-line-number="1"><span class="co"># create new column named User_Rating that doesn&#39;t contain spaces and give it the values of the original User Rating variable name </span></a>
<a class="sourceLine" id="cb144-2" data-line-number="2">amzn[<span class="st">&#39;User_Rating&#39;</span>] =<span class="st"> </span>amzn[,<span class="dv">3</span>]</a>
<a class="sourceLine" id="cb144-3" data-line-number="3"></a>
<a class="sourceLine" id="cb144-4" data-line-number="4"><span class="co"># print the first few lines of amzn</span></a>
<a class="sourceLine" id="cb144-5" data-line-number="5"><span class="kw">head</span>(amzn)</a></code></pre></div>
<pre><code>##                                                                 Name
## 1                                      10-Day Green Smoothie Cleanse
## 2                                                  11/22/63: A Novel
## 3                            12 Rules for Life: An Antidote to Chaos
## 4                                             1984 (Signet Classics)
## 5 5,000 Awesome Facts (About Everything!) (National Geographic Kids)
## 6                      A Dance with Dragons (A Song of Ice and Fire)
##                     Author User.Rating Reviews Price Year       Genre
## 1                 JJ Smith         4.7   17350     8 2016 Non Fiction
## 2             Stephen King         4.6    2052    22 2011     Fiction
## 3       Jordan B. Peterson         4.7   18979    15 2018 Non Fiction
## 4            George Orwell         4.7   21424     6 2017     Fiction
## 5 National Geographic Kids         4.8    7665    12 2019 Non Fiction
## 6      George R. R. Martin         4.4   12643    11 2011     Fiction
##   User_Rating
## 1         4.7
## 2         4.6
## 3         4.7
## 4         4.7
## 5         4.8
## 6         4.4</code></pre>
<p>Now we have a properly named <code>User_Rating</code> variable and we can delete the faulty variable name from earlier.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" data-line-number="1"><span class="co"># remove the 3rd column which is currently User Rating with a space</span></a>
<a class="sourceLine" id="cb146-2" data-line-number="2">amzn[,<span class="dv">3</span>] =<span class="st"> </span><span class="ot">NULL</span></a></code></pre></div>
<p>Using the code <code>amzn[,3] = NULL</code>, we effectively removed the 3rd column of the <code>amzn</code> dataframe. We need to be very careful <strong>not to run this line again</strong> as it will remove the 3rd column each time you run it. So, if we were to accidentally run this again, we would remove the <code>Reviews</code> variable within this dataframe which is not what we want to do.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" data-line-number="1"><span class="co"># print the variable names of the amzn dataframe</span></a>
<a class="sourceLine" id="cb147-2" data-line-number="2"><span class="kw">names</span>(amzn)</a></code></pre></div>
<pre><code>## [1] &quot;Name&quot;        &quot;Author&quot;      &quot;Reviews&quot;     &quot;Price&quot;       &quot;Year&quot;       
## [6] &quot;Genre&quot;       &quot;User_Rating&quot;</code></pre>
<p>Now that our names have been fixed, we can look at an order of the highest rated books using the <code>order()</code> function on the <code>User_Rating</code> variable.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb149-1" data-line-number="1"><span class="co"># print the order of the user ratings</span></a>
<a class="sourceLine" id="cb149-2" data-line-number="2"><span class="kw">order</span>(amzn<span class="op">$</span>User_Rating, <span class="dt">decreasing=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>##   [1]  41  42  82  83  84  85  86  87  88 147 148 152 154 156 157 158 175 188
##  [19] 189 190 191 192 193 208 220 245 246 247 248 249 250 251 252 253 289 290
##  [37] 304 421 432 477 478 479 480 481 482 483 487 488 489 490 522 546   5  20
##  [55]  31  33  34  35  43  45  55  56  59  64  65  66  67  72  73  74  81  89
##  [73] 124 125 126 127 128 134 144 145 146 151 153 160 161 166 173 174 177 179
##  [91] 180 187 203 204 217 224 225 226 229 240 241 254 265 266 267 268 282 291
## [109] 292 294 295 298 326 327 328 329 330 331 344 346 350 351 352 353 359 361
## [127] 362 363 382 391 392 402 403 404 405 406 407 411 412 419 420 429 431 433
## [145] 436 438 439 447 448 449 452 453 459 464 475 491 492 506 507 508 509 510
## [163] 512 516 517 518 519 520 523 525 530 534 535 536 541 542 543 544 545   1
## [181]   3   4   7   8   9  27  32  36  37  38  47  48  49  50  51  52  53  80
## [199]  96  97  98  99 100 103 111 112 113 114 115 117 159 162 163 167 168 169
## [217] 170 171 176 199 200 228 230 231 232 243 263 264 269 285 286 296 297 300
## [235] 321 322 323 324 325 336 337 338 339 341 342 343 347 355 366 367 368 369
## [253] 376 377 378 379 380 381 385 386 387 388 399 408 409 410 413 414 415 418
## [271] 434 468 469 470 473 474 476 493 494 514 524 528 529 547 548 549 550   2
## [289]  10  11  12  13  15  17  21  22  24  26  29  30  39  44  57  58  61  68
## [307]  69  75  76  77  79  90 101 102 119 120 121 123 129 130 131 132 135 139
## [325] 149 178 184 194 196 198 201 202 209 210 211 212 213 234 235 236 242 244
## [343] 256 257 260 261 262 283 284 287 288 293 301 302 303 315 332 333 334 335
## [361] 340 348 349 370 371 372 373 374 375 401 437 454 457 458 460 461 462 465
## [379] 466 467 484 485 486 495 496 501 502 503 504 511 527 537  14  16  19  40
## [397]  46  70  71  78  91  92  94  95 106 109 122 140 141 142 143 195 197 205
## [415] 206 207 214 215 218 221 222 227 237 238 239 258 272 273 274 275 276 277
## [433] 278 279 280 281 314 316 398 424 425 426 427 435 450 463 497 498 513 515
## [451] 526 539   6  18  60 104 105 116 118 150 164 165 182 185 186 216 233 317
## [469] 318 360 389 390 395 396 397 422 423 428 440 441 442 443 444 451 471 472
## [487] 531 532 533 538  25  54  62  93 172 181 259 270 271 319 320 356 357 358
## [505] 400 416 417 445 446 455 456 499 500 505 521  28  63 110 223 255 345 430
## [523] 540 183 219 299 364 383 384 136 137 138 155 305 306 307 308 309 310 311
## [541] 312 313 365  23 393 394 107 108 133 354</code></pre>
<p>This returns the the relative order of each book’s rating (remember, each book has it’s own <strong>row</strong>). As we can see, the 1st book has the 41st ranked rating. How can we actually re-order our dataframe so that we are sorted from the highest rated to the lowest rated?</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb151-1" data-line-number="1"><span class="co"># reorder our rows based on the user rating column</span></a>
<a class="sourceLine" id="cb151-2" data-line-number="2">amzn =<span class="st"> </span>amzn[<span class="kw">order</span>(amzn<span class="op">$</span>User_Rating, <span class="dt">decreasing=</span><span class="ot">TRUE</span>),]</a></code></pre></div>
<p>In the line above, re-order each row for all columns <strong>based</strong> on the <code>User_Rating</code> column. We use our handy index brackets <code>[]</code> that take a <code>row</code> and <code>column</code> argument to sort each row based on the relative index order of the <code>User_Rating</code>. The <code>column</code> space (aka after the comma that is <em>outside</em> of the <code>order()</code> function) is left blank so we include <em>all</em> columns with this sorting measure. In short, this keeps each row set to the exact same but orders them based on their User Ratings.</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb152-1" data-line-number="1"><span class="co"># print the top few rows</span></a>
<a class="sourceLine" id="cb152-2" data-line-number="2"><span class="kw">head</span>(amzn)</a></code></pre></div>
<pre><code>##                                                                                   Name
## 41                                            Brown Bear, Brown Bear, What Do You See?
## 42                                            Brown Bear, Brown Bear, What Do You See?
## 82            Dog Man and Cat Kid: From the Creator of Captain Underpants (Dog Man #4)
## 83 Dog Man: A Tale of Two Kitties: From the Creator of Captain Underpants (Dog Man #3)
## 84     Dog Man: Brawl of the Wild: From the Creator of Captain Underpants (Dog Man #6)
## 85     Dog Man: Brawl of the Wild: From the Creator of Captain Underpants (Dog Man #6)
##             Author Reviews Price Year   Genre User_Rating
## 41 Bill Martin Jr.   14344     5 2017 Fiction         4.9
## 42 Bill Martin Jr.   14344     5 2019 Fiction         4.9
## 82      Dav Pilkey    5062     6 2018 Fiction         4.9
## 83      Dav Pilkey    4786     8 2017 Fiction         4.9
## 84      Dav Pilkey    7235     4 2018 Fiction         4.9
## 85      Dav Pilkey    7235     4 2019 Fiction         4.9</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb154-1" data-line-number="1"><span class="co"># print the last few rows</span></a>
<a class="sourceLine" id="cb154-2" data-line-number="2"><span class="kw">tail</span>(amzn)</a></code></pre></div>
<pre><code>##                                                                                         Name
## 393                                      The Goldfinch: A Novel (Pulitzer Prize for Fiction)
## 394                                      The Goldfinch: A Novel (Pulitzer Prize for Fiction)
## 107 Fifty Shades of Grey: Book One of the Fifty Shades Trilogy (Fifty Shades of Grey Series)
## 108 Fifty Shades of Grey: Book One of the Fifty Shades Trilogy (Fifty Shades of Grey Series)
## 133                                                               Go Set a Watchman: A Novel
## 354                                                                       The Casual Vacancy
##           Author Reviews Price Year   Genre User_Rating
## 393  Donna Tartt   33844    20 2013 Fiction         3.9
## 394  Donna Tartt   33844    20 2014 Fiction         3.9
## 107    E L James   47265    14 2012 Fiction         3.8
## 108    E L James   47265    14 2013 Fiction         3.8
## 133   Harper Lee   14982    19 2015 Fiction         3.6
## 354 J.K. Rowling    9372    12 2012 Fiction         3.3</code></pre>
<p>Our new column name</p>
</div>
</div>
<div id="plotting-the-data" class="section level2">
<h2><span class="header-section-number">5.4</span> Plotting the Data</h2>
<p>We use plotting as a data visualization method. Plotting the data is a way to tell a story about the data. R has some fantastic plotting packages such as <code>ggplot2</code>, <code>Lattice</code>, and <code>leaflet</code> that are covered in other courses. Today, let’s introduce the R <code>base</code> plotting functions that offer basic, yet very customizable, visualizations.</p>
<div id="base-plotting" class="section level3">
<h3><span class="header-section-number">5.4.1</span> Base Plotting</h3>
<p>Base plotting in R comes with an ability to create scatter plots, bar plots, pie charts, histograms, line charts, etc. These are very customizable and offer a solid foundation when transitioning to more advanced plotting packages. While many programmers prefer plotting packages mentioned above, we can still use the <code>base</code> plotting functions from R to create aesthetically pleasing plots. When we are plotting, arguments become very important and these plotting functions can take many arguments.</p>
</div>
<div id="histograms" class="section level3">
<h3><span class="header-section-number">5.4.2</span> Histograms</h3>
<p>Histograms are visual representations of a spread of data. We can use these to quantify where the most frequent values are binned. Let’s create a histogram of the User Ratings.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb156-1" data-line-number="1"><span class="co"># histogram of the user rating vector from the amzn dataframe</span></a>
<a class="sourceLine" id="cb156-2" data-line-number="2"><span class="kw">hist</span>(<span class="dt">x =</span> amzn<span class="op">$</span>User_Rating)</a></code></pre></div>
<p><img src="Introduction-to-R_files/figure-html/unnamed-chunk-96-1.png" width="672" /></p>
<p>The breaks, or bin width, of this histogram is pretty wide. Let’s create finer break areas by listing each rating in a sequence function.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb157-1" data-line-number="1"><span class="co"># histogram of the user rating from the amzn dataframe with breaks from 3.3 to 5 spaced by 0.1</span></a>
<a class="sourceLine" id="cb157-2" data-line-number="2"><span class="kw">hist</span>(<span class="dt">x =</span> amzn<span class="op">$</span>User_Rating, <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dt">from =</span> <span class="fl">3.3</span>, <span class="dt">to=</span> <span class="fl">5.0</span>, <span class="dt">by=</span><span class="fl">0.1</span>))</a></code></pre></div>
<p><img src="Introduction-to-R_files/figure-html/unnamed-chunk-97-1.png" width="672" /></p>
<p>A user rating of 4.8 is the most popular rating for this best seller colleciton of books. From here, we can customize the title, color, x label, y label, etc. Unsure of which arguments you can set? Don’t forget about the help function <code>?hist</code> .</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb158-1" data-line-number="1"><span class="co"># histogram of the user rating from the amzn dataframe with breaks from 3.3 to 5 spaced by 0.1</span></a>
<a class="sourceLine" id="cb158-2" data-line-number="2"><span class="kw">hist</span>(<span class="dt">x =</span> amzn<span class="op">$</span>User_Rating, <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dt">from =</span> <span class="fl">3.3</span>, <span class="dt">to=</span> <span class="fl">5.0</span>, <span class="dt">by=</span><span class="fl">0.1</span>),</a>
<a class="sourceLine" id="cb158-3" data-line-number="3">     <span class="dt">main =</span> <span class="st">&quot;Amazon Bestseller User Ratings&quot;</span>, <span class="dt">col =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="dt">xlab =</span> <span class="st">&quot;User Ratings&quot;</span>,</a>
<a class="sourceLine" id="cb158-4" data-line-number="4">     <span class="dt">ylab =</span> <span class="st">&quot;Number of Occurences&quot;</span>)</a></code></pre></div>
<p><img src="Introduction-to-R_files/figure-html/unnamed-chunk-98-1.png" width="672" /></p>
<p>From the help function we found out the that these arguments dictate the following parameters:</p>
<table>
<thead>
<tr class="header">
<th>Argument Name</th>
<th>Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>main</code></td>
<td>Plot Title</td>
</tr>
<tr class="even">
<td><code>col</code></td>
<td>Color of the histogram</td>
</tr>
<tr class="odd">
<td><code>xlab</code></td>
<td>X label name</td>
</tr>
<tr class="even">
<td><code>ylab</code></td>
<td>Y label name</td>
</tr>
</tbody>
</table>
<p>Each plotting function <em>generally</em> follows the same argument naming scheme. However, they can vary, and this is why it’s important to use the <code>help()</code> function for a plotting function. Additionally, a useful link to bookmark is the <a href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf">R Color Naming Guide</a>. This contains the names of preloaded color names in R. This is where I found <code>lightblue</code>.</p>
</div>
<div id="pie-chart" class="section level3">
<h3><span class="header-section-number">5.4.3</span> Pie Chart</h3>
<p>Pie charts are useful plots when comparing the number of occurrences for categorical information. For example, one might use a pie chart for wins/losses of a sports team. One of the variables from the Amazon BestSellers dataset is Book Genre. Let’s create a pie chart that shows a pie chart of the genres. First, we’ll need to know which genres are part of the Amazon Book Genre dataset.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb159-1" data-line-number="1"><span class="co"># use the unique function to print the genres </span></a>
<a class="sourceLine" id="cb159-2" data-line-number="2"><span class="kw">unique</span>(amzn<span class="op">$</span>Genre)</a></code></pre></div>
<pre><code>## [1] &quot;Fiction&quot;     &quot;Non Fiction&quot;</code></pre>
<p>So there are only two broad genres within this dataset. Nonetheless, let’s create a pie chart of these. Let’s count the total number of occurrences for each genre.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb161-1" data-line-number="1"><span class="co"># count the total number of occurrences for each genre.</span></a>
<a class="sourceLine" id="cb161-2" data-line-number="2">fic =<span class="st"> </span><span class="kw">sum</span>(amzn<span class="op">$</span>Genre <span class="op">==</span><span class="st"> &#39;Fiction&#39;</span>)</a>
<a class="sourceLine" id="cb161-3" data-line-number="3">nonfic =<span class="st"> </span><span class="kw">sum</span>(amzn<span class="op">$</span>Genre <span class="op">==</span><span class="st"> &#39;Non Fiction&#39;</span>)</a></code></pre></div>
<p>Now, we can use these total numbers to create our piechart.</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb162-1" data-line-number="1"><span class="co"># create a vector called slices that contain total number of fiction and nonfiction books</span></a>
<a class="sourceLine" id="cb162-2" data-line-number="2">slices &lt;-<span class="st"> </span><span class="kw">c</span>(fic, nonfic)</a>
<a class="sourceLine" id="cb162-3" data-line-number="3"><span class="co"># create a vector called lbls that contain labels for the respective total number of fiction and nonfiction books</span></a>
<a class="sourceLine" id="cb162-4" data-line-number="4">lbls &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Fiction&quot;</span>, <span class="st">&quot;Non-Fiction&quot;</span>)</a>
<a class="sourceLine" id="cb162-5" data-line-number="5"><span class="co"># plot using the pie function</span></a>
<a class="sourceLine" id="cb162-6" data-line-number="6"><span class="kw">pie</span>(<span class="dt">x =</span> slices, <span class="dt">labels =</span> lbls, <span class="dt">main=</span><span class="st">&quot;Pie Chart of Amazon Bestseller Book Genres&quot;</span>)</a></code></pre></div>
<p><img src="Introduction-to-R_files/figure-html/unnamed-chunk-101-1.png" width="672" /></p>
<p>This is a good start. Let’s customize this more by adding colors and percentage values.</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb163-1" data-line-number="1"><span class="co"># create a pct vector that calculates the percentages of each value </span></a>
<a class="sourceLine" id="cb163-2" data-line-number="2">pct &lt;-<span class="st"> </span><span class="kw">round</span>(slices<span class="op">/</span><span class="kw">sum</span>(slices)<span class="op">*</span><span class="dv">100</span>)</a>
<a class="sourceLine" id="cb163-3" data-line-number="3">lbls &lt;-<span class="st"> </span><span class="kw">paste</span>(lbls, pct) <span class="co"># add percents to labels</span></a>
<a class="sourceLine" id="cb163-4" data-line-number="4">lbls</a></code></pre></div>
<pre><code>## [1] &quot;Fiction 44&quot;     &quot;Non-Fiction 56&quot;</code></pre>
<p>Notice here we introduced the <code>paste</code> function that pasted the <code>pct</code> vector values to the end of the <code>lbls</code> values. The <code>paste</code> function and it’s cousin, <code>paste0</code>, are very useful when dealing with character string combinations. This is a heavily used function for many developers. To expand or <code>lbls</code> further, we can add the <code>%</code> sign to the end of each value with the same <code>paste</code> function.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb165-1" data-line-number="1">lbls &lt;-<span class="st"> </span><span class="kw">paste</span>(lbls,<span class="st">&quot;%&quot;</span>,<span class="dt">sep=</span><span class="st">&quot;&quot;</span>) <span class="co"># ad % to labels</span></a>
<a class="sourceLine" id="cb165-2" data-line-number="2">lbls</a></code></pre></div>
<pre><code>## [1] &quot;Fiction 44%&quot;     &quot;Non-Fiction 56%&quot;</code></pre>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb167-1" data-line-number="1"><span class="co"># create color vector that matches a color for each genre</span></a>
<a class="sourceLine" id="cb167-2" data-line-number="2">cols =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;dodgerblue4&quot;</span>, <span class="st">&quot;seagreen1&quot;</span>)</a>
<a class="sourceLine" id="cb167-3" data-line-number="3"><span class="kw">pie</span>(<span class="dt">x =</span> slices,<span class="dt">labels =</span> lbls, <span class="dt">col=</span>cols,<span class="dt">main=</span><span class="st">&quot;Pie Chart of Amazon Bestseller Book Genres&quot;</span>)</a></code></pre></div>
<p><img src="Introduction-to-R_files/figure-html/unnamed-chunk-104-1.png" width="672" /></p>
</div>
<div id="scatter-plot" class="section level3">
<h3><span class="header-section-number">5.4.4</span> Scatter Plot</h3>
<p>Another useful plot that can help describe a dataset is a scatter plot. Scatter plots are often used to evaluate a relationship between two variables. In our case, let’s investigate the relationship between number of reviews and user rating.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb168-1" data-line-number="1"><span class="co"># create scatterplot between number of reviews and user rating</span></a>
<a class="sourceLine" id="cb168-2" data-line-number="2"><span class="kw">plot</span>(<span class="dt">x =</span> amzn<span class="op">$</span>Reviews, <span class="dt">y =</span> amzn<span class="op">$</span>User_Rating)</a></code></pre></div>
<p><img src="Introduction-to-R_files/figure-html/unnamed-chunk-105-1.png" width="672" /></p>
<p>As we can see, there’s not a distinct correlation between number of reviews and user rating. In other words, more reviews does not necessarily indicate a higher or lower user rating <strong>for this dataset</strong>. Remember, this dataset only contains the <strong>Best Sellers</strong>, so our data is limited to the best of the best. We’d likely see a different trend if we had all of the data available. Anyway, even plots that show us no correlation are useful. Let’s spice this up a bit.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb169-1" data-line-number="1"><span class="co"># create scatterplot between number of reviews and user rating</span></a>
<a class="sourceLine" id="cb169-2" data-line-number="2"><span class="kw">plot</span>(<span class="dt">x =</span> amzn<span class="op">$</span>Reviews, <span class="dt">y =</span> amzn<span class="op">$</span>User_Rating, <span class="dt">xlab =</span> <span class="st">&quot;Total Reviews&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Average User Rating&quot;</span>, <span class="dt">main=</span><span class="st">&quot;Amazon Bestsellers 2009-2019&quot;</span>)</a></code></pre></div>
<p><img src="Introduction-to-R_files/figure-html/unnamed-chunk-106-1.png" width="672" /></p>
<p>We can actually go even further here and change our points using the <code>pch</code> argument which is short for plotting character. Then, we can adjust the background color of the points with the <code>bg</code> argument. To go even further, we can also change the size of the point with teh <code>cex</code> argument.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb170-1" data-line-number="1"><span class="co"># create scatterplot between number of reviews and user rating</span></a>
<a class="sourceLine" id="cb170-2" data-line-number="2"><span class="kw">plot</span>(<span class="dt">x =</span> amzn<span class="op">$</span>Reviews, <span class="dt">y =</span> amzn<span class="op">$</span>User_Rating, <span class="dt">xlab =</span> <span class="st">&quot;Total Reviews&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Average User Rating&quot;</span>, <span class="dt">main=</span><span class="st">&quot;Amazon Bestsellers 2009-2019&quot;</span>,</a>
<a class="sourceLine" id="cb170-3" data-line-number="3">     <span class="dt">pch =</span> <span class="dv">23</span>, <span class="dt">bg =</span> <span class="st">&#39;coral&#39;</span>, <span class="dt">cex =</span> <span class="fl">2.0</span>, <span class="dt">col =</span> <span class="st">&quot;dodgerblue4&quot;</span>)</a></code></pre></div>
<p><img src="Introduction-to-R_files/figure-html/unnamed-chunk-107-1.png" width="672" /></p>
<p>With a few additional arguments, we’re given the ability to customize any plot in R. Altogether, the script we created looks like this.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb171-1" data-line-number="1"><span class="co"># this script evaluates the Amazon Bestseller Books dataset</span></a>
<a class="sourceLine" id="cb171-2" data-line-number="2"><span class="co"># James</span></a>
<a class="sourceLine" id="cb171-3" data-line-number="3"></a>
<a class="sourceLine" id="cb171-4" data-line-number="4"><span class="co">### begin script </span><span class="al">###</span></a>
<a class="sourceLine" id="cb171-5" data-line-number="5"></a>
<a class="sourceLine" id="cb171-6" data-line-number="6"><span class="co"># load necessary packages</span></a>
<a class="sourceLine" id="cb171-7" data-line-number="7"><span class="kw">library</span>(readxl)</a>
<a class="sourceLine" id="cb171-8" data-line-number="8"></a>
<a class="sourceLine" id="cb171-9" data-line-number="9"><span class="co"># open our amazon bestsellers file using read_excel from the readxl package</span></a>
<a class="sourceLine" id="cb171-10" data-line-number="10">amzn =<span class="st"> </span><span class="kw">read_excel</span>(<span class="dt">path =</span> <span class="st">&quot;/Users/james/Downloads/amazon_bestsellers.xlsx&quot;</span>)</a>
<a class="sourceLine" id="cb171-11" data-line-number="11"></a>
<a class="sourceLine" id="cb171-12" data-line-number="12"></a>
<a class="sourceLine" id="cb171-13" data-line-number="13"></a>
<a class="sourceLine" id="cb171-14" data-line-number="14"><span class="co"># DATA MANAGEMENT</span></a>
<a class="sourceLine" id="cb171-15" data-line-number="15"><span class="co"># overwrite our amzn tibble dataframe and convert it to a standard dataframe </span></a>
<a class="sourceLine" id="cb171-16" data-line-number="16">amzn =<span class="st"> </span><span class="kw">data.frame</span>(amzn)</a>
<a class="sourceLine" id="cb171-17" data-line-number="17"><span class="co"># create new column named User_Rating that doesn&#39;t contain spaces and give it the values of the original User Rating variable name </span></a>
<a class="sourceLine" id="cb171-18" data-line-number="18">amzn[<span class="st">&#39;User_Rating&#39;</span>] =<span class="st"> </span>amzn[,<span class="dv">3</span>]</a>
<a class="sourceLine" id="cb171-19" data-line-number="19"><span class="co"># remove the 3rd column which is currently User Rating with a space</span></a>
<a class="sourceLine" id="cb171-20" data-line-number="20">amzn[,<span class="dv">3</span>] =<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb171-21" data-line-number="21"><span class="co"># reorder our rows based on the user rating column</span></a>
<a class="sourceLine" id="cb171-22" data-line-number="22">amzn =<span class="st"> </span>amzn[<span class="kw">order</span>(amzn<span class="op">$</span>User_Rating, <span class="dt">decreasing=</span><span class="ot">TRUE</span>),]</a>
<a class="sourceLine" id="cb171-23" data-line-number="23"></a>
<a class="sourceLine" id="cb171-24" data-line-number="24"></a>
<a class="sourceLine" id="cb171-25" data-line-number="25"><span class="co"># HISTOGRAM PLOT</span></a>
<a class="sourceLine" id="cb171-26" data-line-number="26"><span class="co"># histogram of the user rating from the amzn dataframe with breaks from 3.3 to 5 spaced by 0.1</span></a>
<a class="sourceLine" id="cb171-27" data-line-number="27"><span class="kw">hist</span>(<span class="dt">x =</span> amzn<span class="op">$</span>User_Rating, <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dt">from =</span> <span class="fl">3.3</span>, <span class="dt">to=</span> <span class="fl">5.0</span>, <span class="dt">by=</span><span class="fl">0.1</span>),</a>
<a class="sourceLine" id="cb171-28" data-line-number="28">     <span class="dt">main =</span> <span class="st">&quot;Amazon Bestseller User Ratings&quot;</span>, <span class="dt">col =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="dt">xlab =</span> <span class="st">&quot;User Ratings&quot;</span>,</a>
<a class="sourceLine" id="cb171-29" data-line-number="29">     <span class="dt">ylab =</span> <span class="st">&quot;Number of Occurences&quot;</span>)</a>
<a class="sourceLine" id="cb171-30" data-line-number="30"></a>
<a class="sourceLine" id="cb171-31" data-line-number="31"></a>
<a class="sourceLine" id="cb171-32" data-line-number="32"><span class="co"># PIE CHART PLOT</span></a>
<a class="sourceLine" id="cb171-33" data-line-number="33"><span class="co"># count the total number of occurrences for each genre.</span></a>
<a class="sourceLine" id="cb171-34" data-line-number="34">fic =<span class="st"> </span><span class="kw">sum</span>(amzn<span class="op">$</span>Genre <span class="op">==</span><span class="st"> &#39;Fiction&#39;</span>)</a>
<a class="sourceLine" id="cb171-35" data-line-number="35">nonfic =<span class="st"> </span><span class="kw">sum</span>(amzn<span class="op">$</span>Genre <span class="op">==</span><span class="st"> &#39;Non Fiction&#39;</span>)</a>
<a class="sourceLine" id="cb171-36" data-line-number="36"><span class="co"># create a vector called slices that contain total number of fiction and nonfiction books</span></a>
<a class="sourceLine" id="cb171-37" data-line-number="37">slices &lt;-<span class="st"> </span><span class="kw">c</span>(fic, nonfic)</a>
<a class="sourceLine" id="cb171-38" data-line-number="38"><span class="co"># create a vector called lbls that contain labels for the respective total number of fiction and nonfiction books</span></a>
<a class="sourceLine" id="cb171-39" data-line-number="39">lbls &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Fiction&quot;</span>, <span class="st">&quot;Non-Fiction&quot;</span>)</a>
<a class="sourceLine" id="cb171-40" data-line-number="40">pct &lt;-<span class="st"> </span><span class="kw">round</span>(slices<span class="op">/</span><span class="kw">sum</span>(slices)<span class="op">*</span><span class="dv">100</span>) <span class="co"># create a pct vector that calculates the percentages of each value </span></a>
<a class="sourceLine" id="cb171-41" data-line-number="41">lbls &lt;-<span class="st"> </span><span class="kw">paste</span>(lbls, pct) <span class="co"># add percents to labels</span></a>
<a class="sourceLine" id="cb171-42" data-line-number="42">lbls &lt;-<span class="st"> </span><span class="kw">paste</span>(lbls,<span class="st">&quot;%&quot;</span>,<span class="dt">sep=</span><span class="st">&quot;&quot;</span>) <span class="co"># ad % to labels</span></a>
<a class="sourceLine" id="cb171-43" data-line-number="43">cols =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;dodgerblue4&quot;</span>, <span class="st">&quot;seagreen1&quot;</span>) <span class="co"># create color vector that matches a color for each genre</span></a>
<a class="sourceLine" id="cb171-44" data-line-number="44"><span class="kw">pie</span>(<span class="dt">x =</span> slices,<span class="dt">labels =</span> lbls, <span class="dt">col=</span>cols,<span class="dt">main=</span><span class="st">&quot;Pie Chart of Amazon Bestseller Book Genres&quot;</span>)</a>
<a class="sourceLine" id="cb171-45" data-line-number="45"></a>
<a class="sourceLine" id="cb171-46" data-line-number="46"></a>
<a class="sourceLine" id="cb171-47" data-line-number="47"><span class="co"># SCATTERPLOT</span></a>
<a class="sourceLine" id="cb171-48" data-line-number="48"><span class="co"># create scatterplot between number of reviews and user rating</span></a>
<a class="sourceLine" id="cb171-49" data-line-number="49"><span class="kw">plot</span>(<span class="dt">x =</span> amzn<span class="op">$</span>Reviews, <span class="dt">y =</span> amzn<span class="op">$</span>User_Rating, <span class="dt">xlab =</span> <span class="st">&quot;Total Reviews&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Average User Rating&quot;</span>, <span class="dt">main=</span><span class="st">&quot;Amazon Bestsellers 2009-2019&quot;</span>,</a>
<a class="sourceLine" id="cb171-50" data-line-number="50">     <span class="dt">pch =</span> <span class="dv">23</span>, <span class="dt">bg =</span> <span class="st">&#39;coral&#39;</span>, <span class="dt">cex =</span> <span class="fl">2.0</span>, <span class="dt">col =</span> <span class="st">&quot;dodgerblue4&quot;</span>)</a></code></pre></div>
<p>```</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="dataframes-indexing-and-for-loops.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="final-project-world-cup-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
