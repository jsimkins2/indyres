<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Avacados Tutorial | Tech Trainings - From Excel to R</title>
  <meta name="description" content="Tutorial based introduction to R for Excel users" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Avacados Tutorial | Tech Trainings - From Excel to R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Tutorial based introduction to R for Excel users" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Avacados Tutorial | Tech Trainings - From Excel to R" />
  
  <meta name="twitter:description" content="Tutorial based introduction to R for Excel users" />
  

<meta name="author" content="James Simkins" />


<meta name="date" content="2020-06-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="technical-definitions-rules.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.9/datatables.js"></script>
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.19/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Tech Trainings: Excel to R for Businesses</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="welcome.html"><a href="welcome.html"><i class="fa fa-check"></i><b>1</b> Welcome</a><ul>
<li class="chapter" data-level="1.1" data-path="welcome.html"><a href="welcome.html#agenda"><i class="fa fa-check"></i><b>1.1</b> Agenda</a></li>
<li class="chapter" data-level="1.2" data-path="welcome.html"><a href="welcome.html#prerequisites"><i class="fa fa-check"></i><b>1.2</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>2</b> Overview</a><ul>
<li class="chapter" data-level="2.1" data-path="overview.html"><a href="overview.html#what-is-r"><i class="fa fa-check"></i><b>2.1</b> What is R?</a></li>
<li class="chapter" data-level="2.2" data-path="overview.html"><a href="overview.html#reasons-to-love-r"><i class="fa fa-check"></i><b>2.2</b> Reasons to love R</a></li>
<li class="chapter" data-level="2.3" data-path="overview.html"><a href="overview.html#guiding-principles"><i class="fa fa-check"></i><b>2.3</b> Guiding Principles</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-rstudio.html"><a href="r-rstudio.html"><i class="fa fa-check"></i><b>3</b> R &amp; RStudio</a><ul>
<li class="chapter" data-level="3.1" data-path="r-rstudio.html"><a href="r-rstudio.html#open-rstudio"><i class="fa fa-check"></i><b>3.1</b> Open RStudio</a></li>
<li class="chapter" data-level="3.2" data-path="r-rstudio.html"><a href="r-rstudio.html#r-studio-layout"><i class="fa fa-check"></i><b>3.2</b> R Studio Layout</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="installing-and-using-packages.html"><a href="installing-and-using-packages.html"><i class="fa fa-check"></i><b>4</b> Installing and Using Packages</a><ul>
<li class="chapter" data-level="4.1" data-path="installing-and-using-packages.html"><a href="installing-and-using-packages.html#checkpoint---writing-your-first-r-code"><i class="fa fa-check"></i><b>4.1</b> Checkpoint - Writing your first R code</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="technical-definitions-rules.html"><a href="technical-definitions-rules.html"><i class="fa fa-check"></i><b>5</b> Technical Definitions &amp; Rules</a><ul>
<li class="chapter" data-level="5.1" data-path="technical-definitions-rules.html"><a href="technical-definitions-rules.html#important-r-programming-definitions"><i class="fa fa-check"></i><b>5.1</b> Important R Programming Definitions</a></li>
<li class="chapter" data-level="5.2" data-path="technical-definitions-rules.html"><a href="technical-definitions-rules.html#definitions-in-action---tv-data-example"><i class="fa fa-check"></i><b>5.2</b> Definitions in Action - TV Data Example</a><ul>
<li class="chapter" data-level="5.2.1" data-path="technical-definitions-rules.html"><a href="technical-definitions-rules.html#line-by-line-discussion"><i class="fa fa-check"></i><b>5.2.1</b> Line by Line Discussion</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="technical-definitions-rules.html"><a href="technical-definitions-rules.html#parantheses-brackets-and-curly-brackets"><i class="fa fa-check"></i><b>5.3</b> Parantheses (), Brackets [], and Curly brackets</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="avacados-tutorial.html"><a href="avacados-tutorial.html"><i class="fa fa-check"></i><b>6</b> Avacados Tutorial</a><ul>
<li class="chapter" data-level="6.1" data-path="avacados-tutorial.html"><a href="avacados-tutorial.html#ggplot2-crash-course"><i class="fa fa-check"></i><b>6.1</b> ggplot2 crash course</a></li>
<li class="chapter" data-level="6.2" data-path="avacados-tutorial.html"><a href="avacados-tutorial.html#load-the-avacados-dataset"><i class="fa fa-check"></i><b>6.2</b> Load the Avacados Dataset</a></li>
<li class="chapter" data-level="6.3" data-path="avacados-tutorial.html"><a href="avacados-tutorial.html#exploring-the-dataset"><i class="fa fa-check"></i><b>6.3</b> Exploring the Dataset</a></li>
<li class="chapter" data-level="6.4" data-path="avacados-tutorial.html"><a href="avacados-tutorial.html#expanding-the-dataset"><i class="fa fa-check"></i><b>6.4</b> Expanding the dataset</a></li>
<li class="chapter" data-level="6.5" data-path="avacados-tutorial.html"><a href="avacados-tutorial.html#avacado-assignment"><i class="fa fa-check"></i><b>6.5</b> Avacado Assignment</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">James Simkins</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tech Trainings - From Excel to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="avacados-tutorial" class="section level1">
<h1><span class="header-section-number">6</span> Avacados Tutorial</h1>
<p><img src="images/avacado.jpeg" width="100%" style="display: block; margin: auto;" /></p>
<p>For this tutorial, we’ll pretend we work for a supermarket chain interested in avacado pricing. Understanding price changes and the drivers behind those changes can help us forecast future shifts that enable us to stay ahead of the market and create appropriate pricing given the economic environment.</p>
<p><strong>Goals of this tutorial</strong>
- Introduce <code>ggplot2</code> in more detail
- Install and Load Packages
- Load and interact with large dataset
- Forecast future pricing and volume of product</p>
<p><strong>Datasets used</strong>
- <code>avacado.csv</code></p>
<div id="ggplot2-crash-course" class="section level2">
<h2><span class="header-section-number">6.1</span> ggplot2 crash course</h2>
<p><code>ggplot2</code> is the most popular plotting package in R. It’s regarded as one of the best visualization packages of any open-source programming language and has been refactored to work within other languages such as Python. The advantage of <code>ggplot2</code> is how optimized it is to work with big data. We can create <code>ggplots</code> for thousands of data points in less than a second. Customization options are also endless with <code>ggplot2</code>. <code>ggplot2</code> can create the following types of plots:</p>
<p><strong>1) Correlation</strong></p>
<ul>
<li>Scatterplot</li>
<li>Scatterplot With Encircling</li>
<li>Jitter Plot</li>
<li>Counts Chart</li>
<li>Bubble Plot</li>
<li>Animated Bubble Plot</li>
<li>Marginal Histogram / Boxplot</li>
<li>Correlogram</li>
</ul>
<p><strong>2) Deviation</strong></p>
<ul>
<li>Diverging Bars</li>
<li>Diverging Lollipop Chart</li>
<li>Diverging Dot Plot</li>
<li>Area Chart</li>
</ul>
<p><strong>3) Ranking</strong></p>
<ul>
<li>Ordered Bar Chart</li>
<li>Lollipop Chart</li>
<li>Dot Plot</li>
<li>Slope Chart</li>
<li>Dumbbell Plot</li>
</ul>
<p><strong>4) Distribution</strong></p>
<ul>
<li>Histogram</li>
<li>Density Plot</li>
<li>Box Plot</li>
<li>Dot + Box Plot</li>
<li>Tufte Boxplot</li>
<li>Violin Plot</li>
<li>Population Pyramid</li>
</ul>
<p><strong>5) Composition</strong></p>
<ul>
<li>Waffle Chart</li>
<li>Pie Chart</li>
<li>Treemap</li>
<li>Bar Chart</li>
</ul>
<p><strong>6) Change</strong></p>
<ul>
<li>Time Series Plots
<ul>
<li>From a Data Frame</li>
<li>Format to Monthly X Axis</li>
<li>Format to Yearly X Axis</li>
<li>From Long Data Format</li>
<li>From Wide Data Format</li>
</ul></li>
<li>Stacked Area Chart</li>
<li>Calendar Heat Map</li>
<li>Slope Chart</li>
<li>Seasonal Plot</li>
</ul>
<p><strong>7) Groups</strong></p>
<ul>
<li>Dendrogram</li>
<li>Clusters</li>
</ul>
<p><strong>8) Spatial</strong></p>
<ul>
<li>Open Street Map</li>
<li>Google Road Map</li>
<li>Google Hybrid Map</li>
</ul>
<p>Additional information on these plots can be found at the following links:
* <a href="http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html" class="uri">http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html</a>
* <a href="https://tutorials.iq.harvard.edu/R/Rgraphics/Rgraphics.html" class="uri">https://tutorials.iq.harvard.edu/R/Rgraphics/Rgraphics.html</a>
* <a href="https://ggplot2.tidyverse.org/" class="uri">https://ggplot2.tidyverse.org/</a></p>
<p>All <code>ggplot</code> instances follow the same basic format: first calling <code>ggplot</code> and then a plot type. <code>ggplot</code> takes two arguments: the first is a dataset (a data.frame object) and the second is a call to aes(), where you assign variables in the dataset to components of the graph called aesthetics. The specific type of plot you’d like to make with it is the <code>ggplot2</code> function for the general type of plot you want: for example, a barplot is called <code>geom_bar</code> as we saw in the last example. Let’s quickly explore these:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">var1 =<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from=</span><span class="dv">1</span>, <span class="dt">to=</span><span class="dv">30</span>, <span class="dt">by=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb24-2" data-line-number="2">var2 =<span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">n=</span><span class="dv">30</span>, <span class="dt">mean =</span> <span class="dv">10</span>, <span class="dt">sd =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb24-3" data-line-number="3">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> var1, <span class="dt">y =</span> var2)</a>
<a class="sourceLine" id="cb24-4" data-line-number="4"><span class="kw">head</span>(df)</a></code></pre></div>
<pre><code>##   x         y
## 1 1 10.431541
## 2 2  8.828900
## 3 3  9.806681
## 4 4  8.321781
## 5 5  9.324582
## 6 6  9.329287</code></pre>
<p>Now that we have a data frame with variables <code>var1</code> and <code>var2</code>, we can create a ggplot. Let’s start by creating the background of our ggplot by using the first calling <code>ggplot</code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="kw">ggplot</span>(<span class="dt">data =</span> df, <span class="kw">aes</span>(<span class="dt">x =</span> var1, <span class="dt">y =</span> y))</a></code></pre></div>
<p><img src="Tech-Trainings--R-for-Excel-Users_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>The data argument is declared as our <code>df</code> data.frame. Our x axis and y axis are specified by the <code>var1</code> and <code>var2</code> variables within the <code>df</code> dataframe. R understands what <code>var1</code> and <code>var2</code> are because it assumes the aesthetics are <em>variables within</em> the <code>data</code> dataframe. Now we can plot a <code>ggplot2</code> instance using this.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dt">x =</span> var1, <span class="dt">y =</span> var2)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="Tech-Trainings--R-for-Excel-Users_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>The <code>geom</code> in <code>geom_point</code> stands for geometry. All geometrical plots in <code>ggplot2</code> begin with <code>geom</code>.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dt">x =</span> var1, <span class="dt">y =</span> var2)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="Tech-Trainings--R-for-Excel-Users_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>Within the plot type we can specify additional arguments to enhance the plot in a way we’d like.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dt">x =</span> var1, <span class="dt">y =</span> var2)) <span class="op">+</span></a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="dt">linetype =</span> <span class="dv">2</span>, <span class="dt">size =</span> <span class="dv">1</span>)</a></code></pre></div>
<p><img src="Tech-Trainings--R-for-Excel-Users_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>We can also add linear regression lines to our plots easily</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dt">x =</span> var1, <span class="dt">y =</span> var2)) <span class="op">+</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>)</a></code></pre></div>
<p><img src="Tech-Trainings--R-for-Excel-Users_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p>We can have multiple geometry plots on one <code>ggplot</code> instance…</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dt">x =</span> var1, <span class="dt">y =</span> var2)) <span class="op">+</span></a>
<a class="sourceLine" id="cb31-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_smooth</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb31-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="Tech-Trainings--R-for-Excel-Users_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>Histograms can be done within 1 line.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dt">x =</span> var2)) <span class="op">+</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_histogram</span>()</a></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="Tech-Trainings--R-for-Excel-Users_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p>Density plots are easy too!</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dt">x =</span> var2)) <span class="op">+</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_density</span>()</a></code></pre></div>
<p><img src="Tech-Trainings--R-for-Excel-Users_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<p>Now that we’ve gone through some example plots with <code>ggplot2</code>, let’s use <code>ggplot2</code> to plot some real data!</p>
</div>
<div id="load-the-avacados-dataset" class="section level2">
<h2><span class="header-section-number">6.2</span> Load the Avacados Dataset</h2>
<p>First we’ll load in the packages and the avacados dataset.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1"><span class="co"># first let&#39;s load in the packages we need</span></a>
<a class="sourceLine" id="cb36-2" data-line-number="2"><span class="kw">library</span>(data.table)</a></code></pre></div>
<pre><code>## data.table 1.12.2 using 2 threads (see ?getDTthreads).  Latest news: r-datatable.com</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:data.table&#39;:
## 
##     between, first, last</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb43-2" data-line-number="2"><span class="kw">library</span>(stringr)</a>
<a class="sourceLine" id="cb43-3" data-line-number="3"><span class="kw">library</span>(DT)</a>
<a class="sourceLine" id="cb43-4" data-line-number="4"><span class="kw">library</span>(tidyr)</a>
<a class="sourceLine" id="cb43-5" data-line-number="5"><span class="kw">library</span>(corrplot)</a></code></pre></div>
<pre><code>## corrplot 0.84 loaded</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1"><span class="kw">library</span>(leaflet)</a>
<a class="sourceLine" id="cb45-2" data-line-number="2"><span class="kw">library</span>(lubridate)</a></code></pre></div>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:data.table&#39;:
## 
##     hour, isoweek, mday, minute, month, quarter, second, wday, week,
##     yday, year</code></pre>
<pre><code>## The following object is masked from &#39;package:base&#39;:
## 
##     date</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1"><span class="co"># now let&#39;s load in our dataset using read.csv</span></a>
<a class="sourceLine" id="cb49-2" data-line-number="2">avacado_df &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;datasets/avocado.csv&quot;</span>)</a></code></pre></div>
<p>Let’s check out what the avacados dataframe (<code>avacado_df</code>) looks like.</p>
<div id="htmlwidget-c6f53082aafecf74ce40" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-c6f53082aafecf74ce40">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29],["2015-12-27","2015-12-20","2015-12-13","2015-12-06","2015-11-29","2015-11-22","2015-11-15","2015-11-08","2015-11-01","2015-10-25","2015-10-18","2015-10-11","2015-10-04","2015-09-27","2015-09-20","2015-09-13","2015-09-06","2015-08-30","2015-08-23","2015-08-16","2015-08-09","2015-08-02","2015-07-26","2015-07-19","2015-07-12","2015-07-05","2015-06-28","2015-06-21","2015-06-14","2015-06-07"],[1.33,1.35,0.93,1.08,1.28,1.26,0.99,0.98,1.02,1.07,1.12,1.28,1.31,0.99,1.33,1.28,1.11,1.07,1.34,1.33,1.12,1.45,1.11,1.26,1.05,1.35,1.37,1.27,1.32,1.07],[64236.62,54876.98,118220.22,78992.15,51039.6,55979.78,83453.76,109428.33,99811.42,74338.76,84843.44,64489.17,61007.1,106803.39,69759.01,76111.27,99172.96,105693.84,79992.09,80043.78,111140.93,75133.1,106757.1,96617,124055.31,109252.12,89534.81,104849.39,89631.3,122743.06],[1036.74,674.28,794.7,1132,941.48,1184.27,1368.92,703.75,1022.15,842.4,924.86,1582.03,2268.32,1204.88,1028.03,985.73,879.45,689.01,733.16,539.65,584.63,509.94,648.75,1042.1,672.25,869.45,664.23,804.01,850.58,656.71],[54454.85,44638.81,109149.67,71976.41,43838.39,48067.99,73672.72,101815.36,87315.57,64757.44,75595.85,52677.92,49880.67,99409.21,59313.12,65696.86,90062.62,94362.67,67933.79,68666.01,100961.46,62035.06,91949.05,82049.4,94693.52,72600.55,57545.79,76688.55,55400.94,99220.82],[48.16,58.33,130.5,72.58,75.78,43.61,93.26,80,85.34,113,117.07,105.32,101.36,154.84,150.5,142,240.79,335.43,444.78,394.9,368.95,741.08,966.61,2238.02,4257.64,5883.16,4662.71,5481.18,4377.19,90.32],[8696.87,9505.56,8145.35,5811.16,6183.95,6683.91,8318.86,6829.22,11388.36,8625.92,8205.66,10123.9,8756.75,6034.46,9267.36,9286.68,7990.1,10306.73,10880.36,10443.22,9225.89,11847.02,13192.69,11287.48,24431.9,29898.96,26662.08,21875.65,29002.59,22775.21],[8603.62,9408.07,8042.21,5677.4,5986.26,6556.47,8196.81,6266.85,11104.53,8061.47,7877.86,9866.27,8379.98,5888.87,8489.1,8665.19,7762.87,10218.93,10745.79,10297.68,9116.34,11768.52,13061.53,11103.49,24290.08,29663.19,26311.76,21662,28343.14,22314.99],[93.25,97.49,103.14,133.76,197.69,127.44,122.05,562.37,283.83,564.45,327.8,257.63,376.77,145.59,778.26,621.49,227.23,87.8,134.57,145.54,109.55,78.5,131.16,183.99,108.49,235.77,350.32,213.65,659.45,460.22],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33.33,0,0,0,0,0],["conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional"],[2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015],["Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany"]],"container":"<table class=\"table-condensed\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>X<\/th>\n      <th>Date<\/th>\n      <th>AveragePrice<\/th>\n      <th>Total.Volume<\/th>\n      <th>X4046<\/th>\n      <th>X4225<\/th>\n      <th>X4770<\/th>\n      <th>Total.Bags<\/th>\n      <th>Small.Bags<\/th>\n      <th>Large.Bags<\/th>\n      <th>XLarge.Bags<\/th>\n      <th>type<\/th>\n      <th>year<\/th>\n      <th>region<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"tp","scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,3,4,5,6,7,8,9,10,11,13]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1"><span class="co"># understand what classes R recognizes our data as</span></a>
<a class="sourceLine" id="cb50-2" data-line-number="2"><span class="kw">class</span>(avacado_df)</a></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1"><span class="co"># what about the class of the `type` variable within the avacado_df data frame? </span></a>
<a class="sourceLine" id="cb52-2" data-line-number="2"><span class="kw">class</span>(avacado_df<span class="op">$</span>type)</a></code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
</div>
<div id="exploring-the-dataset" class="section level2">
<h2><span class="header-section-number">6.3</span> Exploring the Dataset</h2>
<ul>
<li>Is there null data ?</li>
<li>What are various columns ?</li>
<li>Data in days/weeks ?. How many years ?</li>
<li>How many regions and what are they ?</li>
</ul>
<p><strong>Is there null data?</strong></p>
<p>Null data is a feature of most datasets. In R, null data is classified as <code>NA</code>, or Not Available. If there is null data in a dataset, you’ll see an <code>NA</code> in the dataset. For reference, a blank cell in Microsoft Excel would be regarded as <code>NA</code> when read in R.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1"><span class="kw">sum</span>(<span class="kw">is.na</span>(avacado_df<span class="op">$</span>AveragePrice) <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## [1] 0</code></pre>
<p>To find out if there are any null data points we use the <code>is.na()</code> function. This prints out a <code>logical</code> (aka True or False) for each cell. It prints <code>FALSE</code> if there is data and <code>TRUE</code> if the data is <code>NA</code>. In the code above, we tell R to <code>sum()</code> the number of times the <code>is.na</code> reports <code>TRUE</code> for the <code>AveragePrice</code> variable. We see that the return is 0 here, thus telling us that there are no <code>NA</code> data points in this dataset.</p>
<p>** What are the various column names**</p>
<p>With most things in R, there are multiple ways to answer the same question.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1"><span class="kw">names</span>(avacado_df)</a></code></pre></div>
<pre><code>##  [1] &quot;X&quot;            &quot;Date&quot;         &quot;AveragePrice&quot; &quot;Total.Volume&quot; &quot;X4046&quot;       
##  [6] &quot;X4225&quot;        &quot;X4770&quot;        &quot;Total.Bags&quot;   &quot;Small.Bags&quot;   &quot;Large.Bags&quot;  
## [11] &quot;XLarge.Bags&quot;  &quot;type&quot;         &quot;year&quot;         &quot;region&quot;</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1"><span class="kw">colnames</span>(avacado_df)</a></code></pre></div>
<pre><code>##  [1] &quot;X&quot;            &quot;Date&quot;         &quot;AveragePrice&quot; &quot;Total.Volume&quot; &quot;X4046&quot;       
##  [6] &quot;X4225&quot;        &quot;X4770&quot;        &quot;Total.Bags&quot;   &quot;Small.Bags&quot;   &quot;Large.Bags&quot;  
## [11] &quot;XLarge.Bags&quot;  &quot;type&quot;         &quot;year&quot;         &quot;region&quot;</code></pre>
<p><strong>What years are in this dataset?</strong>
Use the <code>unique</code> function which returns a list of each character string, number, or whatever is in a <code>vector</code> or <code>list</code>.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1"><span class="kw">unique</span>(avacado_df<span class="op">$</span>year)</a></code></pre></div>
<pre><code>## [1] 2015 2016 2017 2018</code></pre>
<p><strong>What regions are in this dataset?</strong></p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1"><span class="kw">unique</span>(avacado_df<span class="op">$</span>region)</a></code></pre></div>
<pre><code>##  [1] Albany              Atlanta             BaltimoreWashington
##  [4] Boise               Boston              BuffaloRochester   
##  [7] California          Charlotte           Chicago            
## [10] CincinnatiDayton    Columbus            DallasFtWorth      
## [13] Denver              Detroit             GrandRapids        
## [16] GreatLakes          HarrisburgScranton  HartfordSpringfield
## [19] Houston             Indianapolis        Jacksonville       
## [22] LasVegas            LosAngeles          Louisville         
## [25] MiamiFtLauderdale   Midsouth            Nashville          
## [28] NewOrleansMobile    NewYork             Northeast          
## [31] NorthernNewEngland  Orlando             Philadelphia       
## [34] PhoenixTucson       Pittsburgh          Plains             
## [37] Portland            RaleighGreensboro   RichmondNorfolk    
## [40] Roanoke             Sacramento          SanDiego           
## [43] SanFrancisco        Seattle             SouthCarolina      
## [46] SouthCentral        Southeast           Spokane            
## [49] StLouis             Syracuse            Tampa              
## [52] TotalUS             West                WestTexNewMexico   
## 54 Levels: Albany Atlanta BaltimoreWashington Boise Boston ... WestTexNewMexico</code></pre>
<p><strong>How many regions are in this dataset?</strong></p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1"><span class="kw">length</span>(<span class="kw">unique</span>(avacado_df<span class="op">$</span>region))</a></code></pre></div>
<pre><code>## [1] 54</code></pre>
<p>** What types of avacados are in this dataset **</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1"><span class="co"># Remember, we can query information about a variable using avacado_df$type or avacado_df[&#39;type&#39;]</span></a>
<a class="sourceLine" id="cb66-2" data-line-number="2"><span class="kw">unique</span>(avacado_df[<span class="st">&#39;type&#39;</span>])</a></code></pre></div>
<pre><code>##              type
## 1    conventional
## 9127      organic</code></pre>
<p>There are 2 types of Avacados in this dataset - conventional and organic. Let’s use <code>ggplot2</code> to plot a density plot of the avacados based on the type.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1"><span class="kw">ggplot</span>(avacado_df, <span class="kw">aes</span>(<span class="dt">x=</span>AveragePrice, <span class="dt">fill=</span>type)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_density</span>() </a></code></pre></div>
<p><img src="Tech-Trainings--R-for-Excel-Users_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
<p>Let’s expand this a little further and create 2 <code>geom_density</code> plots within 1 window.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1"><span class="kw">ggplot</span>(avacado_df, <span class="kw">aes</span>(<span class="dt">x=</span>AveragePrice, <span class="dt">fill=</span>type)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_density</span>() <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="dt">facets =</span> avacado_df<span class="op">$</span>type)</a></code></pre></div>
<p><img src="Tech-Trainings--R-for-Excel-Users_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
<p>In this plot, we declare our <code>ggplot</code> instance, set the type of plot as a <code>geom_density</code> plot, and then use a <code>facet_wrap</code> that wraps a 1d sequence of panels into 2d. This is a fancy way of saying we want to place 2 plots into 1 window and share the y axis.</p>
<p>Let’s expand on this plot a little further by adding the following adjustments to <code>theme</code> and <code>labs</code>. <code>theme</code> is the <code>ggplot2</code> theme you use for your <code>ggplot</code>. <code>labs</code> is the label function. With these two functions, we can declare changes to the x and y labels, title, legend position, etc.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1"><span class="kw">ggplot</span>(avacado_df, <span class="kw">aes</span>(<span class="dt">x=</span>AveragePrice, <span class="dt">fill=</span>type)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_density</span>() <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span>type) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb70-2" data-line-number="2"><span class="kw">theme</span>(<span class="dt">plot.title=</span><span class="kw">element_text</span>(<span class="dt">hjust=</span><span class="fl">0.5</span>), <span class="dt">legend.position=</span><span class="st">&quot;bottom&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Avocado Price by Type&quot;</span>)</a></code></pre></div>
<p><img src="Tech-Trainings--R-for-Excel-Users_files/figure-html/unnamed-chunk-39-1.png" width="672" /></p>
<p>Great job! Now let’s save this image to share with our team later on! We can do this by navigating to the <code>Plot</code> window (bottom right quadrant), selecting <code>Export</code> and <code>Save As Image</code>.</p>
<p><img src="images/save_as_image.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="expanding-the-dataset" class="section level2">
<h2><span class="header-section-number">6.4</span> Expanding the dataset</h2>
<p>Before we expand on this dataset, let’s get rid of unnecessary columns that aren’t useful to us. We do this by declaring the variable equal to <code>NULL</code></p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1">avacado_df<span class="op">$</span>X =<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb71-2" data-line-number="2">avacado_df<span class="op">$</span>X4046 =<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb71-3" data-line-number="3">avacado_df<span class="op">$</span>X4225 =<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb71-4" data-line-number="4">avacado_df<span class="op">$</span>X4770 =<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb71-5" data-line-number="5">avacado_df<span class="op">$</span>XLarge.Bags =<span class="st"> </span><span class="ot">NULL</span></a></code></pre></div>
<p>** Calculating Revenue and Profit **</p>
<p>Revenue = TotalVolume * AveragePrice</p>
<p>Profit - Assume that conventional fetches 15% profit of revenue while organic fetchs 45% of revenue</p>
<p>Let’s calculate the revenue and add it to our dataframe</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1"><span class="co"># we simply multiply the two columns together</span></a>
<a class="sourceLine" id="cb72-2" data-line-number="2">av_revenue =<span class="st"> </span>avacado_df<span class="op">$</span>Total.Volume <span class="op">*</span><span class="st"> </span>avacado_df<span class="op">$</span>AveragePrice</a>
<a class="sourceLine" id="cb72-3" data-line-number="3"></a>
<a class="sourceLine" id="cb72-4" data-line-number="4"><span class="co"># to add our av_revenue vector to the dataframe, add it in like so</span></a>
<a class="sourceLine" id="cb72-5" data-line-number="5">avacado_df[<span class="st">&#39;revenue&#39;</span>] =<span class="st"> </span>av_revenue</a></code></pre></div>
<p>Now let’s add a blank <strong>profit</strong> column and populate it based on our conditions above.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" data-line-number="1"><span class="co"># add the blank column - remember we can use = or &lt;- for object/variable declaration</span></a>
<a class="sourceLine" id="cb73-2" data-line-number="2">avacado_df<span class="op">$</span>profit &lt;-<span class="st"> </span><span class="ot">NA</span></a></code></pre></div>
<p>Now, we need to create 1 profit variable that encompasses 2 conditions. The first is that the <strong>conventional</strong> avacado has a 15% profit, while the <strong>organic</strong> avacado has a 45% profit.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1">avacado_df<span class="op">$</span>type[<span class="dv">1</span>]</a></code></pre></div>
<pre><code>## [1] conventional
## Levels: conventional organic</code></pre>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" data-line-number="1"><span class="co">## use the logical operator to test that avacado_df$type[1] is equal to &#39;conventional&#39;</span></a>
<a class="sourceLine" id="cb76-2" data-line-number="2">avacado_df<span class="op">$</span>type[<span class="dv">1</span>] <span class="op">==</span><span class="st"> &#39;conventional&#39;</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>We see that our test value (row 1 of the <code>avacado_df$type[1]</code>) is <strong>conventional</strong> and our logical test shows this. Now let’s apply this method above to the <code>profit</code> variable we want to add to the dataset. We’ll do so using the <code>ifelse()</code> function.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" data-line-number="1"><span class="co"># let&#39;s use our &quot;is equal to&quot;</span></a>
<a class="sourceLine" id="cb78-2" data-line-number="2">avacado_df<span class="op">$</span>profit =<span class="st"> </span><span class="kw">ifelse</span>(<span class="dt">test =</span> avacado_df<span class="op">$</span>type <span class="op">==</span><span class="st"> &#39;conventional&#39;</span>, <span class="dt">yes =</span> avacado_df<span class="op">$</span>revenue <span class="op">*</span><span class="st"> </span><span class="fl">0.15</span>, <span class="dt">no =</span> avacado_df<span class="op">$</span>revenue <span class="op">*</span><span class="st"> </span><span class="fl">0.45</span>)</a></code></pre></div>
<p><code>ifelse()</code> takes 3 arguments - <code>test</code>, <code>yes</code> and <code>no</code>. Our test is whether the <code>avacado_df$type</code> is <code>conventional</code>. If it is indeed <code>conventional</code> we multiply our revenue by 0.15 to calculate the profit. Conversely if it is not <code>conventional</code>, then it must be organic and thus we multiply our revenue by 0.45 to calculate the profit. This is the beauty of R in motion. The <code>ifelse()</code> function is automatically rolling through <strong>every row</strong> and running the same test. Notice how fast this runs. Keep in mind that this dataset is ~18,000 rows long.</p>
<p>** Let’s take a look at our updated dataframe **</p>
<div id="htmlwidget-a3a38d1a9ae3cec722ff" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-a3a38d1a9ae3cec722ff">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"],["2015-12-27","2015-12-20","2015-12-13","2015-12-06","2015-11-29","2015-11-22","2015-11-15","2015-11-08","2015-11-01","2015-10-25","2015-10-18","2015-10-11","2015-10-04","2015-09-27","2015-09-20","2015-09-13","2015-09-06","2015-08-30","2015-08-23","2015-08-16","2015-08-09","2015-08-02","2015-07-26","2015-07-19","2015-07-12","2015-07-05","2015-06-28","2015-06-21","2015-06-14","2015-06-07"],[1.33,1.35,0.93,1.08,1.28,1.26,0.99,0.98,1.02,1.07,1.12,1.28,1.31,0.99,1.33,1.28,1.11,1.07,1.34,1.33,1.12,1.45,1.11,1.26,1.05,1.35,1.37,1.27,1.32,1.07],[64236.62,54876.98,118220.22,78992.15,51039.6,55979.78,83453.76,109428.33,99811.42,74338.76,84843.44,64489.17,61007.1,106803.39,69759.01,76111.27,99172.96,105693.84,79992.09,80043.78,111140.93,75133.1,106757.1,96617,124055.31,109252.12,89534.81,104849.39,89631.3,122743.06],[8696.87,9505.56,8145.35,5811.16,6183.95,6683.91,8318.86,6829.22,11388.36,8625.92,8205.66,10123.9,8756.75,6034.46,9267.36,9286.68,7990.1,10306.73,10880.36,10443.22,9225.89,11847.02,13192.69,11287.48,24431.9,29898.96,26662.08,21875.65,29002.59,22775.21],[8603.62,9408.07,8042.21,5677.4,5986.26,6556.47,8196.81,6266.85,11104.53,8061.47,7877.86,9866.27,8379.98,5888.87,8489.1,8665.19,7762.87,10218.93,10745.79,10297.68,9116.34,11768.52,13061.53,11103.49,24290.08,29663.19,26311.76,21662,28343.14,22314.99],[93.25,97.49,103.14,133.76,197.69,127.44,122.05,562.37,283.83,564.45,327.8,257.63,376.77,145.59,778.26,621.49,227.23,87.8,134.57,145.54,109.55,78.5,131.16,183.99,108.49,235.77,350.32,213.65,659.45,460.22],["conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional"],[2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015],["Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany","Albany"],[85434.7046,74083.923,109944.8046,85311.522,65330.688,70534.5228,82619.2224,107239.7634,101807.6484,79542.4732,95024.6528,82546.1376,79919.301,105735.3561,92779.4833,97422.4256,110081.9856,113092.4088,107189.4006,106458.2274,124477.8416,108942.995,118500.381,121737.42,130258.0755,147490.362,122662.6897,133158.7253,118313.316,131335.0742],[12815.20569,11112.58845,16491.72069,12796.7283,9799.6032,10580.17842,12392.88336,16085.96451,15271.14726,11931.37098,14253.69792,12381.92064,11987.89515,15860.303415,13916.922495,14613.36384,16512.29784,16963.86132,16078.41009,15968.73411,18671.67624,16341.44925,17775.05715,18260.613,19538.711325,22123.5543,18399.403455,19973.808795,17746.9974,19700.26113]],"container":"<table class=\"table-condensed\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Date<\/th>\n      <th>AveragePrice<\/th>\n      <th>Total.Volume<\/th>\n      <th>Total.Bags<\/th>\n      <th>Small.Bags<\/th>\n      <th>Large.Bags<\/th>\n      <th>type<\/th>\n      <th>year<\/th>\n      <th>region<\/th>\n      <th>revenue<\/th>\n      <th>profit<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"tp","scrollX":true,"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,8,10,11]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>It looks great! Let’s save all of our hard work as a new, separate csv file. We do this using the <code>write.csv()</code> function.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" data-line-number="1"><span class="co"># x is the dataframe, and the file is the path AND the new filename we want to name our CSV file</span></a>
<a class="sourceLine" id="cb79-2" data-line-number="2"><span class="kw">write.csv</span>(<span class="dt">x =</span> avacado_df, <span class="dt">file =</span> <span class="st">&quot;/Users/james/Downloads/updated_avacado.csv&quot;</span>)</a></code></pre></div>
</div>
<div id="avacado-assignment" class="section level2">
<h2><span class="header-section-number">6.5</span> Avacado Assignment</h2>
<p>Complete the following coding problems and submit the resulting plots and CSV file.</p>
<ol style="list-style-type: decimal">
<li><p>The profit for California avacados is 20% higher for <strong>both</strong> conventional and organic avacados. Make an adjustment to the <code>profit</code> variable of the dataframe that reflects the situation where if a rows region is <code>California</code>, the profit is 10% higher for those rows. Save this updated CSV.</p></li>
<li><p>Create a <code>geom_density() ggplot</code> of the California types of avacados vs. profit. Save this image.</p></li>
</ol>
<p><strong>HINT: In order to plot successfully, you’ll have to create a subset of the california dataset like this Albany region example</strong></p>
<p><code>albany = avacado_df[avacado_df$region == 'Albany',]</code></p>
<p>Your final products should look like this…</p>
<p><img src="Tech-Trainings--R-for-Excel-Users_files/figure-html/unnamed-chunk-48-1.png" width="672" /></p>
<div id="htmlwidget-18212f7f2bf7face85b8" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-18212f7f2bf7face85b8">{"x":{"filter":"none","data":[["313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342"],["2015-12-27","2015-12-20","2015-12-13","2015-12-06","2015-11-29","2015-11-22","2015-11-15","2015-11-08","2015-11-01","2015-10-25","2015-10-18","2015-10-11","2015-10-04","2015-09-27","2015-09-20","2015-09-13","2015-09-06","2015-08-30","2015-08-23","2015-08-16","2015-08-09","2015-08-02","2015-07-26","2015-07-19","2015-07-12","2015-07-05","2015-06-28","2015-06-21","2015-06-14","2015-06-07"],[0.9,0.94,0.87,0.78,0.91,0.92,0.83,0.98,0.95,1.12,1.07,1.08,1.02,1.04,1.14,1.13,1.09,1.08,1.18,1.11,1.1,1.16,1.13,1.18,1.13,1.12,1.1,1.07,0.97,0.98],[5040365.47,4695737.21,5259354.3,5775536.27,4575710.62,4804278.16,5755190.69,5148983.51,5830427.96,4592461.81,4999031.79,5063309.38,4943781.29,5216784.63,4759791.13,5106508.12,5806392.78,5647385.15,5193221,5616434.08,6232081.27,5428238.87,5557616.27,5225200.52,5451636.92,6718011.83,5641742.02,5952597.29,6741662.31,6374842.9],[1212707.01,1209165.2,1592438.33,1510267.34,1081497.47,1069305.91,1152918.94,855636.58,651915.96,618031.72,646990.52,555041.88,472090.38,515245.79,552209.77,584419.64,629688.27,649475.65,545248.81,577651.8,580768.97,566776.08,598607.54,601233.56,622965.78,762371.42,654819,662032.34,683201.17,678868.68],[1090140.07,1061703.58,1404012,1376640.91,991568.84,979612.52,1091768.68,813006.4,626993.54,606392.86,633893.61,533478.03,442923.78,496867.66,529779.37,502056.88,591629.83,640600.64,535183.95,572197.46,570728.54,559587.76,590750.1,577736.96,601358.64,731692.08,630301.44,634244.68,657421.42,651944.51],[110737.35,136747.1,180150.37,126664.37,82338.39,82444.32,53797.92,36305.96,19804.69,7596.27,10780.32,18373.18,25572.26,13336.34,17303.91,76297.56,33545.37,5989.25,6573.5,2081.96,7356.84,4953.57,5181.16,20673.8,18032.41,27317.19,21861.54,24277.53,22961.19,23422.39],["conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional","conventional"],[2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015],["California","California","California","California","California","California","California","California","California","California","California","California","California","California","California","California","California","California","California","California","California","California","California","California","California","California","California","California","California","California"],[4536328.923,4413992.9774,4575638.241,4504918.2906,4163896.6642,4419935.9072,4776808.2727,5046003.8398,5538906.562,5143557.2272,5348964.0153,5468374.1304,5042656.9158,5425456.0152,5426161.8882,5770354.1756,6328968.1302,6099175.962,6128000.78,6234241.8288,6855289.397,6296757.0892,6280106.3851,6165736.6136,6160349.7196,7524173.2496,6205916.222,6369279.1003,6539412.4407,6247346.042],[816539.20614,794518.735932,823614.88338,810885.292308,749501.399556,795588.463296,859825.489086,908280.691164,997003.18116,925840.300896,962813.522754,984307.343472,907678.244844,976582.082736,976709.139876,1038663.751608,1139214.263436,1097851.67316,1103040.1404,1122163.529184,1233952.09146,1133416.276056,1130419.149318,1109832.590448,1108862.949528,1354351.184928,1117064.91996,1146470.238054,1177094.239326,1124522.28756]],"container":"<table class=\"table-condensed\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Date<\/th>\n      <th>AveragePrice<\/th>\n      <th>Total.Volume<\/th>\n      <th>Total.Bags<\/th>\n      <th>Small.Bags<\/th>\n      <th>Large.Bags<\/th>\n      <th>type<\/th>\n      <th>year<\/th>\n      <th>region<\/th>\n      <th>revenue<\/th>\n      <th>profit<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"tp","scrollX":true,"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,8,10,11]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="technical-definitions-rules.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
